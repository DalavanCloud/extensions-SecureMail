[%#
  # The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla SecureMail Extension.
  #
  # The Initial Developer of the Original Code is the Mozilla Foundation.
  # Portions created by Mozilla are Copyright (C) 2008 Mozilla Foundation.
  # All Rights Reserved.
  #
  # Contributor(s): Max Kanat-Alexander <mkanat@bugzilla.org>
  #                 Gervase Markham <gerv@gerv.net>
  # Dave Lawrence <dkl@mozilla.com>
  #%]

[% PROCESS global/header.html.tmpl
  title = "Secure Mail Help"
%]

Bugzilla considers certain groups as "secure". If a bug is in one of those groups, Bugzilla will not send unencrypted 
email about it. If you are a member of one of those groups, Bugzilla will not send you unencrypted password reset email. 
To receive encrypted email rather than just a "something changed" placeholder, you must provide either a S/MIME or a GPG/PGP key on the
<a href="[% urlbase FILTER none %]userprefs.cgi?tab=securemail">SecureMail preferences tab</a>.

<h2>S/MIME</h2>

<b>S/MIME Keys must be in PEM format - i.e. Base64-encoded text, with BEGIN CERTIFICATE.</b><br>
<br>
You can get a free S/MIME certificate for your Bugzilla email address from <a href="https://www.startssl.com/?app=12">StartCom</a>. 
Once you have it, <a href="https://www.startssl.com/?app=25#52">export it from your browser as a .p12 file and import it into your mail client</a>. 
You'll need to provide a password when you export - pick a strong one, and then back up this file  somewhere safe.<br>
<br>
Then, you need to convert it to a .pem file. If you have OpenSSL installed, one way is as follows:<br>
<br>
<code>openssl pkcs12 -in certificate.p12 -out certificate.pem -nodes</code><br>
<br>
Open the .pem file in a text editor. You can recognise the public key because it starts "BEGIN CERTIFICATE" and ends "END CERTIFICATE" and 
has an appropriate friendly name (e.g. "StartCom Free Certificate Member's StartCom Ltd. ID"). It is <b>not</b> the section beginning 
"BEGIN RSA PRIVATE KEY", and it is not any of the intermediate certificates or root certificates.<br>
<br>
<b>Note: the .pem file has your private key in plaintext. Delete it once you have copied the public key out of it!</b>

<h2>GPG/PGP</h2>

<b>PGP keys must be ASCII-armoured - i.e. text, with BEGIN PGP PUBLIC KEY.</b><br>
<br>
To create your own public key if you do not yet have one, then do the following:<br>
<br>
1. Install the GPG suite of utilities for your operating system.<br>
<br>
<a href="http://www.gnupg.org/download/index.en.html">http://www.gnupg.org/download/index.en.html</a><br>
<br>
2. Generate a private key.<br>
<br>
<code>gpg --gen-key</code><br>
<br>
You’ll have to answer several questions:<br>
<br>
<ul>
  <li>What kind and size of key you want; the defaults are probably good enough.</li>
  <li>How long the key should be valid; you can safely choose a non-expiring key.</li>
  <li>Your real name and e-mail address; these are necessary for identifying your key in a larger set of keys.</li>
  <li>A comment for your key; the comment can be empty.</li>
  <li>A passphrase. Whatever you do, don’t forget it! Your key, and all your encrypted files, will be useless if you do.</li>
</ul>
<br>
3. Generate an ASCII version of your public key.<br>
<br>
<code>gpg --armor --output pubkey.txt --export 'Your Name'</code><br>
<br>
Paste the contents of pubkey.txt into the SecureMail text field in Bugzilla. You will need to configure your email client to use 
your associated private key to decrypt the encrypted emails from Bugzilla.<br>
<br>
Further reading: <a href="http://www.madboa.com/geek/gpg-quickstart">GPG Quickstart</a>.

[% PROCESS global/footer.html.tmpl %]


